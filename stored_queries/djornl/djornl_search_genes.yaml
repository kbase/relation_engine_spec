# Simple fuzzy search genes using the djornl_gene_view ArangoSearch view
name: djornl_search_genes
params:
  type: object
  required: [search_text]
  properties:
    search_text:
      type: string
      title: Query Text
      minLength: 3
query: |
  FOR g IN djornl_gene_view
      SEARCH ANALYZER(
            PHRASE(g.tair_computational_desc, @search_text) OR
            PHRASE(g.tair_short_desc, @search_text) OR
            PHRASE(g.mapman_desc, @search_text) OR
            PHRASE(g.go_desc, @search_text) OR
            PHRASE(g.mapman_name, @search_text) OR
            PHRASE(g.mapman_desc, @search_text) OR
            PHRASE(g.pheno_desc1, @search_text) OR
            PHRASE(g.pheno_desc2, @search_text) OR
            PHRASE(g.pheno_desc3, @search_text) OR
            PHRASE(g.user_notes, @search_text),
            'text_en'
        )
        OR PHRASE(g.go_terms, @search_text)
        OR PHRASE(g.transcript, @search_text)
      RETURN g
